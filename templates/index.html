<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Reconocimiento de Placas</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      crossorigin="anonymous"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet" />
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='80'>üê≥</text></svg>">
    <style>
      body {
        background: linear-gradient(120deg, #181c2f 0%, #232946 100%);
        color: #eaeaea;
        min-height: 100vh;
        font-family: 'Montserrat', Arial, sans-serif;
        letter-spacing: 0.01em;
      }
      .navbar {
        background: rgba(35, 41, 70, 0.85) !important;
        box-shadow: 0 4px 24px 0 #0f172a44;
        border-radius: 0 0 18px 18px;
        backdrop-filter: blur(8px);
      }
      .navbar-brand h1 {
        color: #00eaff !important;
        font-weight: 700;
        letter-spacing: 2.5px;
        text-shadow: 0 2px 16px #00eaff55;
        text-align: center;
        width: 100%;
        font-size: 2.2rem;
      }
      .container {
        margin-top: 30px;
        margin-bottom: 30px;
        max-width: 950px;
        padding-left: 18px;
        padding-right: 18px;
      }
      .input-group {
        background: rgba(36, 41, 61, 0.7);
        border-radius: 18px;
        padding: 24px 24px 18px 24px;
        box-shadow: 0 4px 24px #00eaff22;
        backdrop-filter: blur(6px);
        border: 1.5px solid #00eaff33;
      }
      .form-control {
        background: rgba(255,255,255,0.07);
        color: #eaeaea;
        border: none;
        border-radius: 8px;
      }
      .form-control:focus {
        box-shadow: 0 0 0 2px #00eaff77;
        background: rgba(255,255,255,0.13);
        color: #fff;
      }
      .btn-info {
        background: linear-gradient(90deg, #00eaff 0%, #005bea 100%);
        border: none;
        font-weight: 700;
        border-radius: 8px;
        box-shadow: 0 2px 8px #00eaff33;
        transition: background 0.2s, box-shadow 0.2s;
      }
      .btn-info:hover {
        background: linear-gradient(90deg, #005bea 0%, #00eaff 100%);
        box-shadow: 0 4px 16px #00eaff55;
      }
      .table-bordered th, .table-bordered td {
        border: 2px solid #00eaff55 !important;
      }
      .table th {
        background: rgba(0,234,255,0.18);
        color: #00eaff;
        text-align: center;
        font-weight: 700;
        font-size: 1.1rem;
        letter-spacing: 1px;
      }
      .table td {
        background: rgba(36, 41, 61, 0.7);
        color: #eaeaea;
        text-align: center;
        vertical-align: middle;
        font-size: 1.2rem;
      }
      .img-fluid {
        border-radius: 14px;
        box-shadow: 0 4px 24px #00eaff22;
        border: 1.5px solid #00eaff33;
        background: rgba(36, 41, 61, 0.5);
      }
      .footer-banner {
        width: 100%;
        background: linear-gradient(90deg, #00eaff 0%, #005bea 100%);
        color: #fff;
        text-align: center;
        padding: 16px 0 12px 0;
        font-size: 1.1rem;
        font-weight: 500;
        letter-spacing: 1px;
        margin-top: 50px;
        border-radius: 0 0 18px 18px;
        box-shadow: 0 -2px 16px #00eaff33;
      }
      .glass-card {
        background: rgba(36, 41, 61, 0.55);
        border-radius: 22px;
        box-shadow: 0 8px 32px #00eaff22, 0 1.5px 8px #23294655;
        backdrop-filter: blur(10px);
        border: 1.5px solid #00eaff33;
        padding: 36px 32px 32px 32px;
        margin: 0 auto 32px auto;
        max-width: 820px;
        min-width: 320px;
        width: 100%;
      }
      td[style*="background-color: #00c6fb"] {
        background: linear-gradient(90deg, #00eaff 0%, #005bea 100%) !important;
        color: #fff !important;
        font-size: 2.1rem !important;
        font-weight: 800 !important;
        letter-spacing: 2px;
        text-shadow: 0 2px 12px #00eaff55;
        border-radius: 10px;
        box-shadow: 0 2px 12px #00eaff33;
      }
      .placa-container {
        width: 200px;
        height: 80px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(255,255,255,0.15);
        border-radius: 12px;
        box-shadow: 0 2px 8px #0002;
        margin: 24px auto;
        overflow: hidden;
      }
      .placa-img {
        max-width: 100%;
        max-height: 100%;
        width: auto;
        height: auto;
        margin: 0 auto;
        display: block;
        object-fit: contain;
        border-radius: 8px;
        background: #fff;
      }
      @media (max-width: 768px) {
        .navbar-brand h1 { font-size: 1.2rem; }
        .footer-banner { font-size: 0.9rem; }
        .container { padding: 0 6px; }
      }
      @media (max-width: 900px) {
        .glass-card { padding: 18px 6px; }
        .container { padding-left: 4px; padding-right: 4px; }
      }
    </style>
  </head>
  <body>
    <!-- Navigation bar -->
    <nav class="navbar navbar-light mb-4">
      <div class="container justify-content-center">
        <a class="navbar-brand w-100 text-center" href="/">
          <h1 class="display-6">RECONOCIMIENTO DE PLACAS</h1>
        </a>
      </div>
    </nav>
    <div class="glass-card">
      <form action="/" method="POST" enctype="multipart/form-data">
        <div class="input-group mb-4">
          <input type="file" class="form-control" name="image_name" required />
          <input type="submit" value="Subir Imagen" class="btn btn-info text-white" style="font-weight:bold;" />
        </div>
      </form>

      {% if upload %}
      <div class="row mb-4">
        <div class="col-md-6 mb-3 mb-md-0">
          <img
            class="img-fluid"
            src="{{ url_for('static', filename='upload/' + upload_image) }}"
            alt="Imagen original"
          />
        </div>
        <div class="col-md-6">
          <img
            class="img-fluid"
            src="{{ url_for('static', filename='predict/' + upload_image) }}"
            alt="Imagen con detecci√≥n"
          />
        </div>
      </div>
      <table class="table table-bordered">
        <thead>
          <tr>
            <th>Detecci√≥n del Modelo</th>
            <th>Plus Texto Detectado</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>
              <div class="placa-container">
                <img src="{{ url_for('static', filename='roi/' + upload_image) }}" alt="Recorte placa" class="placa-img">
              </div>
            </td>
            <td class="placa-text">
              {{ text }}
              {% if filtro and ocr_engine %}
                <div class="mt-2 small text-info">
                  <b>Filtro usado:</b> {{ filtro }}<br>
                  <b>OCR:</b> {{ ocr_engine }}
                </div>
              {% endif %}
            </td>
          </tr>
        </tbody>
      </table>
      {% endif %}
    </div>
    <div class="footer-banner">
      Proyecto de Visi√≥n Artificial - USIL | Rody Uzuriaga ¬© 2025
    </div>
  </body>
</html>
